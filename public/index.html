<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>Marvel OR DC Better?</title>
		<link rel="stylesheet" type="text/css" href="style.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	</head>
	<body>
		<nav>
			<ul>
            	<li><a href="/">Home</a></li>
				<li><a href="/admin">Admin</a></li>
			</ul>
		</nav>
		
		<script type="text/javascript"> 
			
			function crewOrImp(){
				var xhr = new XMLHttpRequest();			
				
				xhr.open("GET","http://localhost:3000/crewOrImp", true);
				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

				xhr.onreadystatechange = function() {
        			if(this.readyState == XMLHttpRequest.DONE && this.status == 200){
            			document.getElementById("meme-div").innerHTML = this.responseText;
						document.getElementById("meme-div").style.backgroundColor = "black"; 
       				}
				};
				
				xhr.send();
   			}

			function insertMeme(){
				var filepath = document.getElementById("insertMeme").value;

				var xhr = new XMLHttpRequest();
				xhr.open("GET","http://localhost:3000/insertMeme?filepath=" + filepath, true);
			xhr.open("GET","http://localhost:3000/insertMeme", true);
				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

				xhr.onreadystatechange = function() {
					if(this.readyState == XMLHttpRequest.DONE && this.status == 200){
						document.getElementById("meme-div").innerHTML = this.responseText;
					}
				};
				xhr.send();
			}

			function getAllRatings(){
				var xhr = new XMLHttpRequest();			
				
				xhr.open("GET","http://localhost:3000/getRatings", true);
				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

				xhr.onreadystatechange = function() {
        			if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
            			document.getElementById("ratings-div").innerHTML = this.responseText;
       				}
				};
				
				xhr.send();
   			}
			
		</script>

		<h1 style=" center">Are you impasta or crewmate?</h1>
		
		<div id="meme-div"></div>

		<button type="button" onclick="crewOrImp()">Nobody Picks in this World</button>

		<input type="text" id = "filepath" accept-charset="UTF-8" />

		<br />
		<button type= "button" onclick="insertMeme()">Send it!</button>

		<button type = "button" onclick="getAllRatings()">Get back</button>

		<div id="ratings-div"></div>



	</body>
</html>